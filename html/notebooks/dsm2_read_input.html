
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Reading Hydro echo files into Pandas DataFrame &#8212; pydsm 2021.12.13+0.geb83565.dirty documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Reading hydro hdf5 files from DSM2" href="dsm2_read_hydro_h5.html" />
    <link rel="prev" title="Examples" href="notebooks.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<section id="Reading-Hydro-echo-files-into-Pandas-DataFrame">
<h1>Reading Hydro echo files into Pandas DataFrame<a class="headerlink" href="#Reading-Hydro-echo-files-into-Pandas-DataFrame" title="Permalink to this headline">¶</a></h1>
<p>hydro (and qual) compile the input files and output an echo file that contains all the input data that goes into the model run. This is a very useful file as it is a direct representation of the input as seen by the model. This is especially important as the input system with its layering and overrides and include featues can be quite complex and sometimes it can be hard to see what actually finally make it into the model run.</p>
<p>To create an echo file of the inputs, refer to hydro and qual document. Below is an example</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>hydro -e hydro_main.inp

qual -e qual_main.inp
</pre></div>
</div>
<p>The notebook here shows how to use the pydsm parser to read this echo file into a dictionary of pandas DataFrame objects</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">io</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="c1"># main import</span>
<span class="kn">import</span> <span class="nn">pydsm</span>
<span class="kn">from</span> <span class="nn">pydsm.input</span> <span class="kn">import</span> <span class="n">read_input</span><span class="p">,</span><span class="n">write_input</span>
</pre></div>
</div>
</div>
<section id="Read-input-into-a-dictionary-of-pandas-DataFrames">
<h2>Read input into a dictionary of pandas DataFrames<a class="headerlink" href="#Read-input-into-a-dictionary-of-pandas-DataFrames" title="Permalink to this headline">¶</a></h2>
<p>DSM2 input consists of tables that have a name, e.g. CHANNEL. They have named columns and then rows of values for those columns</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CHANNEL
CHAN_NO LENGTH MANNING DISPERSION UPNODE DOWNNODE
0   1   19500   0.035   360.0   1   2
1   2   14000   0.028   360.0   2   3
...
END
</pre></div>
</div>
<p>The <em>read_input</em> method reads the input file, parsing the tables found into data frames and returning a dictionary the keys of which are the names of the tables</p>
<p>Lets see how this looks…</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">fname</span><span class="o">=</span><span class="s1">&#39;../../tests/data/hydro_echo_historical_v82.inp&#39;</span>
<span class="n">tables</span><span class="o">=</span><span class="n">read_input</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="Print-list-of-all-tables">
<h2>Print list of all tables<a class="headerlink" href="#Print-list-of-all-tables" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">tables</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;ENVVAR&#39;, &#39;SCALAR&#39;, &#39;IO_FILE&#39;, &#39;CHANNEL&#39;, &#39;XSECT&#39;, &#39;XSECT_LAYER&#39;, &#39;RESERVOIR&#39;, &#39;RESERVOIR_VOL&#39;, &#39;RESERVOIR_CONNECTION&#39;, &#39;GATE&#39;, &#39;GATE_WEIR_DEVICE&#39;, &#39;GATE_PIPE_DEVICE&#39;, &#39;TRANSFER&#39;, &#39;CHANNEL_IC&#39;, &#39;RESERVOIR_IC&#39;, &#39;BOUNDARY_STAGE&#39;, &#39;BOUNDARY_FLOW&#39;, &#39;SOURCE_FLOW&#39;, &#39;SOURCE_FLOW_RESERVOIR&#39;, &#39;INPUT_GATE&#39;, &#39;INPUT_TRANSFER_FLOW&#39;, &#39;OPERATING_RULE&#39;, &#39;OPRULE_EXPRESSION&#39;, &#39;OPRULE_TIME_SERIES&#39;, &#39;OUTPUT_CHANNEL&#39;, &#39;OUTPUT_RESERVOIR&#39;, &#39;OUTPUT_GATE&#39;]
</pre></div></div>
</div>
</section>
<section id="Display-the-DataFrame-for-a-table,-e.g. CHANNEL">
<h2>Display the DataFrame for a table, e.g. CHANNEL<a class="headerlink" href="#Display-the-DataFrame-for-a-table,-e.g. CHANNEL" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">display</span><span class="p">(</span><span class="n">tables</span><span class="p">[</span><span class="s1">&#39;CHANNEL&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>CHAN_NO</th>
      <th>LENGTH</th>
      <th>MANNING</th>
      <th>DISPERSION</th>
      <th>UPNODE</th>
      <th>DOWNNODE</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>19500</td>
      <td>0.035</td>
      <td>360.0</td>
      <td>1</td>
      <td>2</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>14000</td>
      <td>0.028</td>
      <td>360.0</td>
      <td>2</td>
      <td>3</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>13000</td>
      <td>0.028</td>
      <td>360.0</td>
      <td>3</td>
      <td>4</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>14050</td>
      <td>0.028</td>
      <td>360.0</td>
      <td>4</td>
      <td>5</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>12350</td>
      <td>0.028</td>
      <td>360.0</td>
      <td>5</td>
      <td>6</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>516</th>
      <td>575</td>
      <td>13000</td>
      <td>0.022</td>
      <td>1800.0</td>
      <td>328</td>
      <td>357</td>
    </tr>
    <tr>
      <th>517</th>
      <td>700</td>
      <td>10000</td>
      <td>0.033</td>
      <td>360.0</td>
      <td>700</td>
      <td>330</td>
    </tr>
    <tr>
      <th>518</th>
      <td>701</td>
      <td>10000</td>
      <td>0.033</td>
      <td>360.0</td>
      <td>701</td>
      <td>700</td>
    </tr>
    <tr>
      <th>519</th>
      <td>702</td>
      <td>10000</td>
      <td>0.033</td>
      <td>360.0</td>
      <td>702</td>
      <td>701</td>
    </tr>
    <tr>
      <th>520</th>
      <td>703</td>
      <td>10000</td>
      <td>0.033</td>
      <td>360.0</td>
      <td>703</td>
      <td>702</td>
    </tr>
  </tbody>
</table>
<p>521 rows × 6 columns</p>
</div></div>
</div>
<p>It is a data frame so you can query its types, etc just like a pandas DataFrame</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="n">tables</span><span class="p">[</span><span class="s1">&#39;CHANNEL&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dtypes</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
CHAN_NO         int64
LENGTH          int64
MANNING       float64
DISPERSION    float64
UPNODE          int64
DOWNNODE        int64
dtype: object
</pre></div></div>
</div>
</section>
<section id="Programmatic-inspection-of-input">
<h2>Programmatic inspection of input<a class="headerlink" href="#Programmatic-inspection-of-input" title="Permalink to this headline">¶</a></h2>
<p>This is an important feature as pandas has a multitude of features to allow for filtering, describing and joining with other DataFrames and this can be used to analyze the input file</p>
<p>For example, display all channels with length &gt; 20000 feet</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">c</span><span class="o">=</span><span class="n">tables</span><span class="p">[</span><span class="s1">&#39;CHANNEL&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Channels with length &gt; 20000 ft:&#39;</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">LENGTH</span><span class="o">&gt;</span><span class="mi">20000</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Channels with length &gt; 20000 ft:
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>CHAN_NO</th>
      <th>LENGTH</th>
      <th>MANNING</th>
      <th>DISPERSION</th>
      <th>UPNODE</th>
      <th>DOWNNODE</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>372</th>
      <td>392</td>
      <td>23897</td>
      <td>0.022</td>
      <td>360.0</td>
      <td>310</td>
      <td>311</td>
    </tr>
    <tr>
      <th>374</th>
      <td>394</td>
      <td>21261</td>
      <td>0.022</td>
      <td>360.0</td>
      <td>312</td>
      <td>313</td>
    </tr>
    <tr>
      <th>376</th>
      <td>396</td>
      <td>24303</td>
      <td>0.022</td>
      <td>360.0</td>
      <td>314</td>
      <td>315</td>
    </tr>
    <tr>
      <th>378</th>
      <td>398</td>
      <td>21353</td>
      <td>0.024</td>
      <td>360.0</td>
      <td>316</td>
      <td>350</td>
    </tr>
    <tr>
      <th>381</th>
      <td>401</td>
      <td>25700</td>
      <td>0.022</td>
      <td>360.0</td>
      <td>319</td>
      <td>321</td>
    </tr>
    <tr>
      <th>394</th>
      <td>414</td>
      <td>24177</td>
      <td>0.028</td>
      <td>360.0</td>
      <td>334</td>
      <td>335</td>
    </tr>
    <tr>
      <th>396</th>
      <td>416</td>
      <td>25418</td>
      <td>0.028</td>
      <td>360.0</td>
      <td>336</td>
      <td>337</td>
    </tr>
    <tr>
      <th>413</th>
      <td>434</td>
      <td>20141</td>
      <td>0.019</td>
      <td>920.0</td>
      <td>353</td>
      <td>354</td>
    </tr>
    <tr>
      <th>416</th>
      <td>437</td>
      <td>20200</td>
      <td>0.022</td>
      <td>740.0</td>
      <td>356</td>
      <td>357</td>
    </tr>
    <tr>
      <th>461</th>
      <td>484</td>
      <td>21700</td>
      <td>0.021</td>
      <td>1200.0</td>
      <td>400</td>
      <td>372</td>
    </tr>
    <tr>
      <th>483</th>
      <td>513</td>
      <td>31445</td>
      <td>0.021</td>
      <td>1800.0</td>
      <td>418</td>
      <td>420</td>
    </tr>
    <tr>
      <th>487</th>
      <td>522</td>
      <td>22742</td>
      <td>0.021</td>
      <td>1800.0</td>
      <td>425</td>
      <td>428</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="Combining-input-tables">
<h2>Combining input tables<a class="headerlink" href="#Combining-input-tables" title="Permalink to this headline">¶</a></h2>
<p>Channels have cross sections but those are defined in the ‘XSECT_LAYER’ table.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span><span class="o">=</span><span class="n">tables</span><span class="p">[</span><span class="s1">&#39;XSECT_LAYER&#39;</span><span class="p">]</span>
<span class="n">display</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>CHAN_NO</th>
      <th>DIST</th>
      <th>ELEV</th>
      <th>AREA</th>
      <th>WIDTH</th>
      <th>WET_PERIM</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>0.240</td>
      <td>4.225</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>0.240</td>
      <td>5.995</td>
      <td>103.6</td>
      <td>116.4</td>
      <td>116.5</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1</td>
      <td>0.240</td>
      <td>27.715</td>
      <td>10088.4</td>
      <td>803.1</td>
      <td>805.2</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1</td>
      <td>0.240</td>
      <td>35.345</td>
      <td>16724.9</td>
      <td>936.8</td>
      <td>939.9</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1</td>
      <td>0.240</td>
      <td>38.475</td>
      <td>19710.7</td>
      <td>970.3</td>
      <td>973.6</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>10888</th>
      <td>703</td>
      <td>0.875</td>
      <td>30.720</td>
      <td>19208.3</td>
      <td>574.4</td>
      <td>594.2</td>
    </tr>
    <tr>
      <th>10889</th>
      <td>703</td>
      <td>0.875</td>
      <td>30.920</td>
      <td>19331.5</td>
      <td>682.7</td>
      <td>702.5</td>
    </tr>
    <tr>
      <th>10890</th>
      <td>703</td>
      <td>0.875</td>
      <td>35.030</td>
      <td>22292.8</td>
      <td>755.6</td>
      <td>776.7</td>
    </tr>
    <tr>
      <th>10891</th>
      <td>703</td>
      <td>0.875</td>
      <td>41.900</td>
      <td>27735.4</td>
      <td>830.4</td>
      <td>854.0</td>
    </tr>
    <tr>
      <th>10892</th>
      <td>703</td>
      <td>0.875</td>
      <td>42.090</td>
      <td>27898.3</td>
      <td>830.7</td>
      <td>854.3</td>
    </tr>
  </tbody>
</table>
<p>10893 rows × 6 columns</p>
</div></div>
</div>
<p>These can be combined (merged) with the channel table on the ‘CHAN_NO’ common column to get a larger table with channel and x section information</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">fc</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">on</span><span class="o">=</span><span class="s1">&#39;CHAN_NO&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">fc</span><span class="p">[</span><span class="n">fc</span><span class="o">.</span><span class="n">CHAN_NO</span><span class="o">==</span><span class="mi">441</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;DIST&#39;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DIST: &#39;</span><span class="p">,</span><span class="n">name</span><span class="p">)</span>
    <span class="n">display</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
DIST:  0.007
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>CHAN_NO</th>
      <th>LENGTH</th>
      <th>MANNING</th>
      <th>DISPERSION</th>
      <th>UPNODE</th>
      <th>DOWNNODE</th>
      <th>DIST</th>
      <th>ELEV</th>
      <th>AREA</th>
      <th>WIDTH</th>
      <th>WET_PERIM</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>8597</th>
      <td>441</td>
      <td>5398</td>
      <td>0.022</td>
      <td>1800.0</td>
      <td>360</td>
      <td>361</td>
      <td>0.007</td>
      <td>-69.571</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>8598</th>
      <td>441</td>
      <td>5398</td>
      <td>0.022</td>
      <td>1800.0</td>
      <td>360</td>
      <td>361</td>
      <td>0.007</td>
      <td>-50.761</td>
      <td>15009.5</td>
      <td>1595.8</td>
      <td>1596.3</td>
    </tr>
    <tr>
      <th>8599</th>
      <td>441</td>
      <td>5398</td>
      <td>0.022</td>
      <td>1800.0</td>
      <td>360</td>
      <td>361</td>
      <td>0.007</td>
      <td>-48.121</td>
      <td>19423.5</td>
      <td>1749.7</td>
      <td>1750.2</td>
    </tr>
    <tr>
      <th>8600</th>
      <td>441</td>
      <td>5398</td>
      <td>0.022</td>
      <td>1800.0</td>
      <td>360</td>
      <td>361</td>
      <td>0.007</td>
      <td>-38.601</td>
      <td>45235.5</td>
      <td>3673.7</td>
      <td>3674.9</td>
    </tr>
    <tr>
      <th>8601</th>
      <td>441</td>
      <td>5398</td>
      <td>0.022</td>
      <td>1800.0</td>
      <td>360</td>
      <td>361</td>
      <td>0.007</td>
      <td>-29.411</td>
      <td>81225.1</td>
      <td>4158.2</td>
      <td>4159.8</td>
    </tr>
    <tr>
      <th>8602</th>
      <td>441</td>
      <td>5398</td>
      <td>0.022</td>
      <td>1800.0</td>
      <td>360</td>
      <td>361</td>
      <td>0.007</td>
      <td>11.588</td>
      <td>271505.0</td>
      <td>5122.2</td>
      <td>5127.5</td>
    </tr>
    <tr>
      <th>8603</th>
      <td>441</td>
      <td>5398</td>
      <td>0.022</td>
      <td>1800.0</td>
      <td>360</td>
      <td>361</td>
      <td>0.007</td>
      <td>13.448</td>
      <td>281078.4</td>
      <td>5149.9</td>
      <td>5155.3</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
DIST:  0.496
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>CHAN_NO</th>
      <th>LENGTH</th>
      <th>MANNING</th>
      <th>DISPERSION</th>
      <th>UPNODE</th>
      <th>DOWNNODE</th>
      <th>DIST</th>
      <th>ELEV</th>
      <th>AREA</th>
      <th>WIDTH</th>
      <th>WET_PERIM</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>8604</th>
      <td>441</td>
      <td>5398</td>
      <td>0.022</td>
      <td>1800.0</td>
      <td>360</td>
      <td>361</td>
      <td>0.496</td>
      <td>-57.738</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>8605</th>
      <td>441</td>
      <td>5398</td>
      <td>0.022</td>
      <td>1800.0</td>
      <td>360</td>
      <td>361</td>
      <td>0.496</td>
      <td>-45.738</td>
      <td>17399.2</td>
      <td>2898.0</td>
      <td>2898.1</td>
    </tr>
    <tr>
      <th>8606</th>
      <td>441</td>
      <td>5398</td>
      <td>0.022</td>
      <td>1800.0</td>
      <td>360</td>
      <td>361</td>
      <td>0.496</td>
      <td>-44.338</td>
      <td>21506.8</td>
      <td>2989.5</td>
      <td>2989.8</td>
    </tr>
    <tr>
      <th>8607</th>
      <td>441</td>
      <td>5398</td>
      <td>0.022</td>
      <td>1800.0</td>
      <td>360</td>
      <td>361</td>
      <td>0.496</td>
      <td>-37.828</td>
      <td>43278.8</td>
      <td>3697.5</td>
      <td>3698.5</td>
    </tr>
    <tr>
      <th>8608</th>
      <td>441</td>
      <td>5398</td>
      <td>0.022</td>
      <td>1800.0</td>
      <td>360</td>
      <td>361</td>
      <td>0.496</td>
      <td>17.441</td>
      <td>277685.2</td>
      <td>4783.9</td>
      <td>4790.7</td>
    </tr>
    <tr>
      <th>8609</th>
      <td>441</td>
      <td>5398</td>
      <td>0.022</td>
      <td>1800.0</td>
      <td>360</td>
      <td>361</td>
      <td>0.496</td>
      <td>20.471</td>
      <td>292255.5</td>
      <td>4808.1</td>
      <td>4815.2</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
DIST:  0.914
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>CHAN_NO</th>
      <th>LENGTH</th>
      <th>MANNING</th>
      <th>DISPERSION</th>
      <th>UPNODE</th>
      <th>DOWNNODE</th>
      <th>DIST</th>
      <th>ELEV</th>
      <th>AREA</th>
      <th>WIDTH</th>
      <th>WET_PERIM</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>8610</th>
      <td>441</td>
      <td>5398</td>
      <td>0.022</td>
      <td>1800.0</td>
      <td>360</td>
      <td>361</td>
      <td>0.914</td>
      <td>-52.325</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>8611</th>
      <td>441</td>
      <td>5398</td>
      <td>0.022</td>
      <td>1800.0</td>
      <td>360</td>
      <td>361</td>
      <td>0.914</td>
      <td>-50.835</td>
      <td>1095.4</td>
      <td>1472.0</td>
      <td>1472.0</td>
    </tr>
    <tr>
      <th>8612</th>
      <td>441</td>
      <td>5398</td>
      <td>0.022</td>
      <td>1800.0</td>
      <td>360</td>
      <td>361</td>
      <td>0.914</td>
      <td>-43.025</td>
      <td>16536.4</td>
      <td>2480.1</td>
      <td>2480.4</td>
    </tr>
    <tr>
      <th>8613</th>
      <td>441</td>
      <td>5398</td>
      <td>0.022</td>
      <td>1800.0</td>
      <td>360</td>
      <td>361</td>
      <td>0.914</td>
      <td>-42.835</td>
      <td>17065.9</td>
      <td>3211.0</td>
      <td>3211.3</td>
    </tr>
    <tr>
      <th>8614</th>
      <td>441</td>
      <td>5398</td>
      <td>0.022</td>
      <td>1800.0</td>
      <td>360</td>
      <td>361</td>
      <td>0.914</td>
      <td>14.614</td>
      <td>254820.8</td>
      <td>5063.7</td>
      <td>5067.6</td>
    </tr>
    <tr>
      <th>8615</th>
      <td>441</td>
      <td>5398</td>
      <td>0.022</td>
      <td>1800.0</td>
      <td>360</td>
      <td>361</td>
      <td>0.914</td>
      <td>17.244</td>
      <td>268182.3</td>
      <td>5115.0</td>
      <td>5119.1</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
</section>
<section id="Visualizing-input-data">
<h1>Visualizing input data<a class="headerlink" href="#Visualizing-input-data" title="Permalink to this headline">¶</a></h1>
<p>Furthermore this information can be displayed with the usual pandas and other visualization libraries that are available</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">group</span><span class="o">=</span><span class="n">fc</span><span class="p">[</span><span class="n">fc</span><span class="o">.</span><span class="n">CHAN_NO</span><span class="o">==</span><span class="mi">441</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;DIST&#39;</span><span class="p">)</span>
<span class="n">dist</span><span class="p">,</span><span class="n">group</span><span class="o">=</span><span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">group</span><span class="p">))</span>
<span class="n">group</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="s1">&#39;ELEV&#39;</span><span class="p">,</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;AREA&#39;</span><span class="p">,</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;line&#39;</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;AREA&#39;</span><span class="p">,</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;AREA with ELEV&#39;</span><span class="p">)</span>
<span class="n">group</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="s1">&#39;ELEV&#39;</span><span class="p">,</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;WIDTH&#39;</span><span class="p">,</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;line&#39;</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;WIDTH&#39;</span><span class="p">,</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;WIDTH with ELEV&#39;</span><span class="p">)</span>
<span class="n">_</span><span class="o">=</span><span class="n">group</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="s1">&#39;ELEV&#39;</span><span class="p">,</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;WET_PERIM&#39;</span><span class="p">,</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;line&#39;</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;WET_PERIM&#39;</span><span class="p">,</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;WET_PERIM with ELEV&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_dsm2_read_input_17_0.png" src="../_images/notebooks_dsm2_read_input_17_0.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_dsm2_read_input_17_1.png" src="../_images/notebooks_dsm2_read_input_17_1.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_dsm2_read_input_17_2.png" src="../_images/notebooks_dsm2_read_input_17_2.png" />
</div>
</div>
</section>
<section id="Writing-input-to-file">
<h1>Writing input to file<a class="headerlink" href="#Writing-input-to-file" title="Permalink to this headline">¶</a></h1>
<p>Once the tables are manipulated using pandas DataFrame functions, these can be written to a file to be used as input to run DSM2 models</p>
<p>The code below shows</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">write_input</span><span class="p">(</span><span class="s1">&#39;../../tests/hydro_echo_historical_v82_copy.inp&#39;</span><span class="p">,</span><span class="n">tables</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>
</pre></div>
</div>
</div>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">pydsm</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../readme.html">pydsm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">pydsm</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="notebooks.html">Examples</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Reading Hydro echo files into Pandas DataFrame</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Visualizing-input-data">Visualizing input data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Writing-input-to-file">Writing input to file</a></li>
<li class="toctree-l2"><a class="reference internal" href="dsm2_read_hydro_h5.html">Reading hydro hdf5 files from DSM2</a></li>
<li class="toctree-l2"><a class="reference internal" href="dsm2_read_hydro_h5.html#Hydro-data-file-structure">Hydro data file structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="dsm2_read_qual_h5.html">Reading qual hdf5 files from DSM2</a></li>
<li class="toctree-l2"><a class="reference internal" href="dsm2_read_qual_h5.html#Qual-data-file-structure">Qual data file structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="dsm2_input_network.html">DSM2 as a graph network</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../authors.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../history.html">History</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="notebooks.html">Examples</a><ul>
      <li>Previous: <a href="notebooks.html" title="previous chapter">Examples</a></li>
      <li>Next: <a href="dsm2_read_hydro_h5.html" title="next chapter">Reading hydro hdf5 files from DSM2</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Nicky Sandhu.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.0.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/notebooks/dsm2_read_input.ipynb.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>